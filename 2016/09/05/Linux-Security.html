<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Linux Security</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://mattpearson.github.io/favicon.ico">

    <script type="text/javascript" src="//mattpearson.github.io/themes/ichi/assets/js/vendor/fastclick.js?v=1473088433772"></script>
    <script type="text/javascript" src="//mattpearson.github.io/themes/ichi/assets/js/vendor/modernizr.js?v=1473088433772"></script>


    <link rel="stylesheet" type="text/css" href="//mattpearson.github.io/themes/ichi/assets/css/normalize.css?v=1473088433772" />
    <link rel="stylesheet" type="text/css" href="//mattpearson.github.io/themes/ichi/assets/css/foundation.min.css?v=1473088433772" />
    <!--[if lte IE 8]>
        <link rel="stylesheet" type="text/css" href="//mattpearson.github.io/themes/ichi/assets/css/outdatedBrowser.min.css?v=1473088433772">
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="//mattpearson.github.io/themes/ichi/assets/fonts/foundation-icons/foundation-icons.css?v=1473088433772" />
    <link rel="stylesheet" type="text/css" href="//mattpearson.github.io/themes/ichi/assets/css/styles.css?v=1473088433772" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:300,700,400|Source+Sans+Pro:300,400,600,700,900,300italic,400italic,600italic,700italic,900italic" />

    <link rel="canonical" href="https://mattpearson.github.io/2016/09/05/Linux-Security.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="mattpearson blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Linux Security" />
    <meta property="og:description" content="What should be the first thing you do with a new linux installation? Make it more secure! They include: Disable root login from sshd Allow authentication only through pre-configured ssh keys. Install fail2ban sshd changes First, edit /etc/ssh/sshd_config  (sudo vi /etc/ssh/sshd_config), and change #PermitRootLogin" />
    <meta property="og:url" content="https://mattpearson.github.io/2016/09/05/Linux-Security.html" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Linux Security" />
    <meta name="twitter:description" content="What should be the first thing you do with a new linux installation? Make it more secure! They include: Disable root login from sshd Allow authentication only through pre-configured ssh keys. Install fail2ban sshd changes First, edit /etc/ssh/sshd_config  (sudo vi /etc/ssh/sshd_config), and change #PermitRootLogin" />
    <meta name="twitter:url" content="https://mattpearson.github.io/2016/09/05/Linux-Security.html" />
    
    <script type="application/ld+json">
null
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="mattpearson blog" href="https://mattpearson.github.io/rss/" />
</head>
<body class="post-template">

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdate" href="http://outdatedbrowser.com/">Update my browser now</a></p>
</div>

<nav class="top-bar hide-for-large-up" data-topbar >
  <ul class="title-area">
    <li class="name">

    </li>
    <li class="home"><a class="fi-home" href="https://mattpearson.github.io"></a></li>
    <li class="toggle-topbar"><a href="#" id="trigger-overlay" class="fi-list"></a></li>
  </ul>

<div class="overlay overlay-scale">
    <button type="button" class="overlay-close">Close</button>
    <nav>
        <ul>
            <li><a href="https://mattpearson.github.io">Home</a></li>
        </ul>
    </nav>
</div>

</nav>

<div class="row">

<div class="small-16 medium-16 large-4 columns right head-area" >

<header class="site-head">
    <div class="vertical">
        <div class="site-head-content inner">
            <ul class="side-nav blog-menu show-for-large-up">
                <li><a class="fi-home" href="https://mattpearson.github.io"></a></li>
                <li><a class="fi-torso" href="https://mattpearson.github.io/about"></a></li>
                <li><a class="fi-mail" href="https://mattpearson.github.io/contact"></a></li>
            </ul>
            
            <h1 class="blog-title">mattpearson blog</h1>
            <hr>
            <p class="blog-description">computer science and quantiative finance</p>
            <div class="blog-network">
<!--                 <a href="#" class="fi-social-pinterest"></a>
                <a href="#" class="fi-social-linkedin"></a>
                <a href="#" class="fi-social-behance"></a>
                <a href="#" class="fi-social-deviant-art"></a>
                <a href="#" class="fi-social-dribbble"></a>
                <a href="#" class="fi-social-flickr"></a>
                <a href="#" class="fi-social-github"></a>
                <a href="#" class="fi-social-skype"></a>
                <a href="#" class="fi-social-snapchat"></a>
                <a href="#" class="fi-social-steam"></a>
                <a href="#" class="fi-social-xbox"></a>
                <a href="#" class="fi-social-reddit"></a> -->
            </div>
        </div>
    </div>
</header>

</div>


<div class="small-16 medium-16 large-12 columns main-column left">
    

<main class="content" role="main">

    <article class="post">


            <h1 class="post-title">Linux Security</h1>

            <span class="post-meta label"><time datetime="2016-09-05">05 Sep 2016</time></span>

            <section class="post-content">
                <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>What should be the first thing you do with a new linux installation? Make it more secure! They include:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Disable root login from sshd</p>
</li>
<li>
<p>Allow authentication only through pre-configured ssh keys.</p>
</li>
<li>
<p>Install fail2ban</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sshd_changes">sshd changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, edit /etc/ssh/sshd_config  (sudo vi /etc/ssh/sshd_config), and change</p>
</div>
<div class="literalblock">
<div class="content">
<pre>#PermitRootLogin yes
#AuthorizedKeysFile      .ssh/.authorized_keys</pre>
</div>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="literalblock">
<div class="content">
<pre>PermitRootLogin no
AuthorizedKeysFile      .ssh/.authorized_keys</pre>
</div>
</div>
<div class="paragraph">
<p>Next, generate a ssh key on your local computer for authentication. There are plenty of how-to guides to do this (such as <a href="https://devops.profitbricks.com/tutorials/use-ssh-keys-with-putty-on-windows/" class="bare">https://devops.profitbricks.com/tutorials/use-ssh-keys-with-putty-on-windows/</a>  for Windows and <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys&#8212;&#8203;2" class="bare">https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys&#8212;&#8203;2</a> for linux) but the essence is as follows for Windows users:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download PuTTYgen and generate a key.</p>
</li>
<li>
<p>For "key comment", enter your username</p>
</li>
<li>
<p>For "key passphrase", you can enter a passphrase for extra security if wanted.</p>
</li>
<li>
<p>click "Save private key" and note location and filename.</p>
</li>
<li>
<p>In PuTTY, create a new session, and go to Connection&#8594;SSH&#8594;Auth&#8594;Browse and choose your private key.  Save this session with the IP address.</p>
</li>
<li>
<p>On your linux box, edit ~/.ssh/.authorized_keys and paste in the content stored in PuTTYgen section titled "Public key for pasting into OpenSSH authorized_keys file". Make sure you copy ALL of it, including the beginning "ssh-rsa" text, AND the ending text after the "==" symbols.</p>
</li>
<li>
<p>Confirm the .authorized_keys file is mode 600 (chmod 600 .authorized_keys).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Wrap up these changes with a sshd restart:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo service sshd restart</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fail2ban">fail2ban</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fail2ban is a service that modifies your iptables rules based on activity that is seen in your log files. If someone attempts to repeatedly log in with incorrect credentials, you can choose to have their IP banned from connecting again for a period of time. A good how-to guide for installing and configuring fail2ban is here:</p>
</div>
<div class="paragraph">
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-protect-ssh-with-fail2ban-on-centos-7" class="bare">https://www.digitalocean.com/community/tutorials/how-to-protect-ssh-with-fail2ban-on-centos-7</a></p>
</div>
</div>
</div>
                        <aside class="tags fi-pricetag-multiple">No tag</aside>
            </section>
            <hr>
            <footer class="post-footer">

                <section class="share">
                    <h4>Liked this post ? Share it.</h4>
                    <a class="fi-social-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://mattpearson.github.io/2016/09/05/Linux-Security.html"
                        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    </a>
                    <a class="fi-social-twitter" href="https://twitter.com/share?text=Linux%20Security&amp;url=https://mattpearson.github.io/2016/09/05/Linux-Security.html"
                        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    </a>
                    <a class="fi-social-google-plus" href="https://plus.google.com/share?url=https://mattpearson.github.io/2016/09/05/Linux-Security.html"
                       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    </a>
                </section>

                <section class="author">
                    <header>
                        <span>About the author</span>
                    </header>
                    <section>
                        <h4>mattpearson</h4>
                        <img src="https://avatars.githubusercontent.com/u/2314787?v&#x3D;3">
                        
                        
                    </section>
                    <footer>
                         <p></p>
                    </footer>
                </section>

        <div class="clearfix"></div>
                    <hr>

            </footer>

        <h3 class="title-disqus"><span class="fi-comments"></span>Discussions</h3>




    </article>

</main>

</div>

</div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>

    <!--[if lte IE 8]>
        <script type="text/javascript" src="//mattpearson.github.io/themes/ichi/assets/js/outdatedBrowser.min.js?v=1473088433772"></script>
    <![endif]-->
    <script type="text/javascript" src="//mattpearson.github.io/themes/ichi/assets/js/min/built.js?v=1473088433772"></script>

    <script>
      $(document).foundation();
    </script>

</body>
</html>
